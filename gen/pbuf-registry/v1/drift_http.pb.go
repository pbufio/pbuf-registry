// Code generated by protoc-gen-go-http. DO NOT EDIT.
// versions:
// - protoc-gen-go-http v2.9.2
// - protoc             (unknown)
// source: pbuf-registry/v1/drift.proto

package v1

import (
	context "context"
	http "github.com/go-kratos/kratos/v2/transport/http"
	binding "github.com/go-kratos/kratos/v2/transport/http/binding"
)

// This is a compile-time assertion to ensure that this generated file
// is compatible with the kratos package it is being compiled against.
var _ = new(context.Context)
var _ = binding.EncodeURL

const _ = http.SupportPackageIsVersion1

const OperationDriftServiceAcknowledgeDriftEvent = "/pbufregistry.v1.DriftService/AcknowledgeDriftEvent"
const OperationDriftServiceGetModuleDriftEvents = "/pbufregistry.v1.DriftService/GetModuleDriftEvents"
const OperationDriftServiceListDriftEvents = "/pbufregistry.v1.DriftService/ListDriftEvents"

type DriftServiceHTTPServer interface {
	// AcknowledgeDriftEvent Acknowledge a drift event
	AcknowledgeDriftEvent(context.Context, *AcknowledgeDriftEventRequest) (*AcknowledgeDriftEventResponse, error)
	// GetModuleDriftEvents Get drift events for a specific module
	GetModuleDriftEvents(context.Context, *GetModuleDriftEventsRequest) (*GetModuleDriftEventsResponse, error)
	// ListDriftEvents List all unacknowledged drift events
	ListDriftEvents(context.Context, *ListDriftEventsRequest) (*ListDriftEventsResponse, error)
}

func RegisterDriftServiceHTTPServer(s *http.Server, srv DriftServiceHTTPServer) {
	r := s.Route("/")
	r.GET("/v1/drift/events", _DriftService_ListDriftEvents0_HTTP_Handler(srv))
	r.POST("/v1/drift/modules/events", _DriftService_GetModuleDriftEvents0_HTTP_Handler(srv))
	r.POST("/v1/drift/events/{event_id}/acknowledge", _DriftService_AcknowledgeDriftEvent0_HTTP_Handler(srv))
}

func _DriftService_ListDriftEvents0_HTTP_Handler(srv DriftServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in ListDriftEventsRequest
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationDriftServiceListDriftEvents)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.ListDriftEvents(ctx, req.(*ListDriftEventsRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*ListDriftEventsResponse)
		return ctx.Result(200, reply)
	}
}

func _DriftService_GetModuleDriftEvents0_HTTP_Handler(srv DriftServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in GetModuleDriftEventsRequest
		if err := ctx.Bind(&in); err != nil {
			return err
		}
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationDriftServiceGetModuleDriftEvents)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.GetModuleDriftEvents(ctx, req.(*GetModuleDriftEventsRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*GetModuleDriftEventsResponse)
		return ctx.Result(200, reply)
	}
}

func _DriftService_AcknowledgeDriftEvent0_HTTP_Handler(srv DriftServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in AcknowledgeDriftEventRequest
		if err := ctx.Bind(&in); err != nil {
			return err
		}
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		if err := ctx.BindVars(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationDriftServiceAcknowledgeDriftEvent)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.AcknowledgeDriftEvent(ctx, req.(*AcknowledgeDriftEventRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*AcknowledgeDriftEventResponse)
		return ctx.Result(200, reply)
	}
}

type DriftServiceHTTPClient interface {
	// AcknowledgeDriftEvent Acknowledge a drift event
	AcknowledgeDriftEvent(ctx context.Context, req *AcknowledgeDriftEventRequest, opts ...http.CallOption) (rsp *AcknowledgeDriftEventResponse, err error)
	// GetModuleDriftEvents Get drift events for a specific module
	GetModuleDriftEvents(ctx context.Context, req *GetModuleDriftEventsRequest, opts ...http.CallOption) (rsp *GetModuleDriftEventsResponse, err error)
	// ListDriftEvents List all unacknowledged drift events
	ListDriftEvents(ctx context.Context, req *ListDriftEventsRequest, opts ...http.CallOption) (rsp *ListDriftEventsResponse, err error)
}

type DriftServiceHTTPClientImpl struct {
	cc *http.Client
}

func NewDriftServiceHTTPClient(client *http.Client) DriftServiceHTTPClient {
	return &DriftServiceHTTPClientImpl{client}
}

// AcknowledgeDriftEvent Acknowledge a drift event
func (c *DriftServiceHTTPClientImpl) AcknowledgeDriftEvent(ctx context.Context, in *AcknowledgeDriftEventRequest, opts ...http.CallOption) (*AcknowledgeDriftEventResponse, error) {
	var out AcknowledgeDriftEventResponse
	pattern := "/v1/drift/events/{event_id}/acknowledge"
	path := binding.EncodeURL(pattern, in, false)
	opts = append(opts, http.Operation(OperationDriftServiceAcknowledgeDriftEvent))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "POST", path, in, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}

// GetModuleDriftEvents Get drift events for a specific module
func (c *DriftServiceHTTPClientImpl) GetModuleDriftEvents(ctx context.Context, in *GetModuleDriftEventsRequest, opts ...http.CallOption) (*GetModuleDriftEventsResponse, error) {
	var out GetModuleDriftEventsResponse
	pattern := "/v1/drift/modules/events"
	path := binding.EncodeURL(pattern, in, false)
	opts = append(opts, http.Operation(OperationDriftServiceGetModuleDriftEvents))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "POST", path, in, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}

// ListDriftEvents List all unacknowledged drift events
func (c *DriftServiceHTTPClientImpl) ListDriftEvents(ctx context.Context, in *ListDriftEventsRequest, opts ...http.CallOption) (*ListDriftEventsResponse, error) {
	var out ListDriftEventsResponse
	pattern := "/v1/drift/events"
	path := binding.EncodeURL(pattern, in, true)
	opts = append(opts, http.Operation(OperationDriftServiceListDriftEvents))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "GET", path, nil, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}
